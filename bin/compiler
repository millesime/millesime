#!/usr/bin/env php
<?php

require __DIR__.'/../vendor/autoload.php';

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\DependencyInjection\Reference;
use Symfony\Component\DependencyInjection\Definition;

$container = new ContainerBuilder();

$container->setParameter('application.name', '@name@');
$container->setParameter('application.version', '@version@');

$container
    ->register('application', 'Symfony\Component\Console\Application')
    ->addArgument('%application.name%')
    ->addArgument('%application.version%')

    ->addMethodCall('add', [new Reference('application.compile')])
;

$container
    ->register('application.compile', 'Methylbro\Compiler\Command\CompileCommand')
;

$container->get('application')->run();
